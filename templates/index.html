<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Saffron Flower Detection</title>
  <link rel="stylesheet" href="/static/styles1.css">
  <!-- Bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="/static/main.js"></script>
</head>
<body>
  <!-- Header with logo -->
  <header class="d-flex justify-content-between align-items-center p-3 shadow-sm bg-white">
    <h2 class="m-0">ðŸŒ¸ Saffron Flower Detection</h2>
    <div class="logo-area d-flex gap-3">
      <img src="/static/logo1.png" alt="Logo1" class="logo">
      <img src="/static/logo2.png" alt="Logo2" class="logo">
      <img src="/static/logo3.png" alt="Logo3" class="logo">
      <img src="/static/logo4.png" alt="Logo4" class="logo">
    </div>
  </header>

  <!-- Main Content -->
  <div class="container mt-4 shadow-lg p-4 rounded bg-white">
    <!-- File Upload Form -->
    <form action="/detect/" method="post" enctype="multipart/form-data" onsubmit="showSpinner()" class="mb-4">
      <h3>Upload Image & Detect</h3>
      <label class="form-label">Choose Image:</label>
      <input type="file" name="file" class="form-control" accept="image/*" required>
      <label class="form-label mt-2">Confidence Threshold (0.1-1.0):</label>
      <input type="number" name="threshold" class="form-control" step="0.1" min="0.1" max="1.0" value="0.5">
      <button type="submit" class="btn btn-gradient w-100 mt-3">Detect Uploaded Image</button>
    </form>

    <hr>

    <!-- Camera Controls -->
    <h3 class="text-center">Live Camera Open & Detect</h3>
    <div class="d-flex justify-content-center gap-3 mt-3">
      <button onclick="startCamera()" class="btn btn-gradient">ðŸ“· Open Camera</button>
      <button onclick="stopCamera()" class="btn btn-outline-danger">â›” Stop Camera</button>
    </div>

    <form action="/capture-detect/" method="post" onsubmit="showSpinner()" class="mt-3">
      <label class="form-label">Confidence Threshold (0.1-1.0):</label>
      <input type="number" name="threshold" class="form-control" step="0.1" min="0.1" max="1.0" value="0.5">
      <button type="submit" class="btn btn-gradient w-100 mt-2">ðŸŽ¯ Capture & Detect</button>
    </form>

    <div class="text-center mt-3">
      <button onclick="clearResults()" class="btn btn-secondary">ðŸ§¹ Clear Results</button>
    </div>

    <!-- Spinner -->
    <div id="spinner" style="display:none;" class="text-center mt-4">
      <div class="loader"></div>
      <p class="mt-2"><strong>Processing... Please wait.</strong></p>
    </div>

    <!-- Results -->
    <div id="results" class="mt-4">
      {% if message %}
        <div class="alert alert-info text-center">{{ message }}</div>
        <p><strong>Detections:</strong> {{ num_detections }}</p>
        <p><strong>Processing Time:</strong> {{ processing_time_sec }}s</p>
        <div class="text-center">
          <img src="{{ image_url }}" class="img-fluid rounded shadow mt-3">
        </div>
        {% if num_detections > 0 %}
          <h4>Bounding Boxes:</h4>
          <pre>{{ bounding_boxes }}</pre>
          <h4>Centers (pixel):</h4>
          <pre>{{ centers }}</pre>
          <h4>Confidences:</h4>
          <pre>{{ confidences }}</pre>
          <h4>3D Points (mm):</h4>
          <pre>{{ real_points }}</pre>
        {% endif %}
      {% endif %}
    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center py-3 mt-4 bg-dark text-white">
    <p>Developed by <strong>Your Team / Institute Name</strong></p>
    <p>&copy; {{ year }} All Rights Reserved.</p>
  </footer>

</body>
</html>
